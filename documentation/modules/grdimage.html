<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>grdimage</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0615b85506723fa54ab13a613a4e9e4c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../custom.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/GMTjl_logo.png" alt="" class="navbar-logo light-content">
    <img src="../../assets/GMTjl_logo.png" alt="" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-documentation" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Documentation</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-documentation">    
        <li>
    <a class="dropdown-item" href="../../documentation.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../documentation/modules.html">
 <span class="dropdown-text">GMT Modules</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/general/types.html">
 <span class="dropdown-text">GMT.jl Types</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/extensions.html">
 <span class="dropdown-text">GMT.jl Extensions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/gdalfuns.html">
 <span class="dropdown-text">GDAL Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/solids.html">
 <span class="dropdown-text">Solids Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/imgproc.html">
 <span class="dropdown-text">Image Processing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/common_features.html">
 <span class="dropdown-text">Common Features</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/alphabetical.html">
 <span class="dropdown-text">Alphabetical List</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../examples.html"> 
<span class="menu-text">Examples</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-gallery-(gmt-gallery" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Gallery (GMT Gallery)</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-gallery-(gmt-gallery">    
        <li>
    <a class="dropdown-item" href="../../gallery.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../gallery/ex01.html">
 <span class="dropdown-text">(1) Contour maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex02.html">
 <span class="dropdown-text">(2) Image presentations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex03.html">
 <span class="dropdown-text">(3) Spectral estimation and xy-plots</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex04.html">
 <span class="dropdown-text">(4)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex05.html">
 <span class="dropdown-text">(5) A 3-D illuminated surface</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex06.html">
 <span class="dropdown-text">(6) Plotting of histograms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex07.html">
 <span class="dropdown-text">(7) A simple location map</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex08.html">
 <span class="dropdown-text">(8) A 3-D histogram</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex09.html">
 <span class="dropdown-text">(9) Time-series along tracks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex10.html">
 <span class="dropdown-text">(10) A geographical bar graph plot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex11.html">
 <span class="dropdown-text">(11)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex12.html">
 <span class="dropdown-text">(12) Optimal triangulation of data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex13.html">
 <span class="dropdown-text">(13) Plotting of vector fields</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex14.html">
 <span class="dropdown-text">(14) Gridding of data and trend surfaces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex15.html">
 <span class="dropdown-text">(15) Gridding, contouring, and masking of unconstrained areas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex16.html">
 <span class="dropdown-text">(16) Gridding of data, continued</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex17.html">
 <span class="dropdown-text">(17) Images clipped by coastlines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex18.html">
 <span class="dropdown-text">(18) Volumes and Spatial Selections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex19.html">
 <span class="dropdown-text">(19) Color patterns on maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex20.html">
 <span class="dropdown-text">(20) Custom plot symbols</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex21.html">
 <span class="dropdown-text">(21)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex22.html">
 <span class="dropdown-text">(22)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex23.html">
 <span class="dropdown-text">(23)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex24.html">
 <span class="dropdown-text">(24)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex25.html">
 <span class="dropdown-text">(25)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex26.html">
 <span class="dropdown-text">(26)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex27.html">
 <span class="dropdown-text">(27)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex28.html">
 <span class="dropdown-text">(28)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex29.html">
 <span class="dropdown-text">(29)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex30.html">
 <span class="dropdown-text">(30)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="../../tutorials.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../tutorials/ISC/isc.jl.html">
 <span class="dropdown-text">ISC seismicity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/Landsat8/histogram_stretch.html">
 <span class="dropdown-text">Landsat 8/9</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/coast/coastlines.html">
 <span class="dropdown-text">Coastlines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/choropleths/choropleths.html">
 <span class="dropdown-text">US Choropleths</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/dlakelan/GMTMaps.html">
 <span class="dropdown-text"><span class="citation" data-cites="dlakelan">@dlakelan</span> choropleths</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/longest_sail/longestsail.html">
 <span class="dropdown-text">Longest Sail</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/vector_shp/vector_shp.html">
 <span class="dropdown-text">Geospatial vector</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/texture_shading/texture.html">
 <span class="dropdown-text">Texture Shading</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/mosaics/mosaics.html">
 <span class="dropdown-text">Mosaics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/insets/insets.html">
 <span class="dropdown-text">Insets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/remote_datasets/remote_datasets.html">
 <span class="dropdown-text">Remote Grids</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/blender_shading/blender_rt.html">
 <span class="dropdown-text">Blender</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/signal/signal.html">
 <span class="dropdown-text">Signal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-geophysics" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Geophysics</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-geophysics">    
        <li>
    <a class="dropdown-item" href="../../geophysics.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../geophysics/seismicity/global_seis.html">
 <span class="dropdown-text">Seismicity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../geophysics/earthtides/01_earthtides.html">
 <span class="dropdown-text">Earth Tides</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../geophysics/weather/01_weather.html">
 <span class="dropdown-text">Weather Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-help" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Help</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-help">    
        <li>
    <a class="dropdown-item" href="https://github.com/GenericMappingTools/GMT.jl/issues"><i class="bi bi-bug" role="img">
</i> 
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://forum.generic-mapping-tools.org/c/questions/5"><i class="bi bi-chat-right-text" role="img">
</i> 
 <span class="dropdown-text">Ask a Question</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#description" id="toc-description" class="nav-link active" data-scroll-target="#description">Description</a></li>
  <li><a href="#required-arguments" id="toc-required-arguments" class="nav-link" data-scroll-target="#required-arguments">Required Arguments</a></li>
  <li><a href="#optional-arguments" id="toc-optional-arguments" class="nav-link" data-scroll-target="#optional-arguments">Optional Arguments</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">grdimage</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grdimage</span>(cmd0<span class="op">::</span><span class="dt">String</span>=<span class="st">""</span>; kwargs<span class="op">...</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Project grids or images and plot them on maps</p>
<section id="description" class="level2">
<h2 class="anchored" data-anchor-id="description">Description</h2>
<p>Reads one 2-D grid and produces a gray-shaded (or colored) map by plotting rectangles centered on each grid node and assigning them a gray-shade (or color) based on the z-value. Alternatively, <strong>grdimage</strong> reads three 2-D grid files with the red, green, and blue components directly (all must be in the 0-255 range). Optionally, illumination may be added by providing a file with intensities in the (-1,+1) range or instructions to derive intensities from the input data grid. Values outside this range will be clipped. Such intensity files can be created from the grid using <a href="../..\documentation/modules/grdgradient.html">grdgradient</a> and, optionally, modified by <a href="../..\documentation/modules/grdhisteq.html">grdhisteq</a>. A third alternative is available when GMT is build with GDAL support. Pass <em>img</em> which can be an image file (geo-referenced or not). In this case the images can optionally be illuminated with the file provided via the <strong>shade</strong> option. Here, if image has no coordinates then those of the intensity file will be used.</p>
<p>When using map projections, the grid is first resampled on a new rectangular grid with the same dimensions. Higher resolution images can be obtained by using the <strong>dpi</strong> option. To obtain the resampled value (and hence shade or color) of each map pixel, its location is inversely projected back onto the input grid after which a value is interpolated between the surrounding input grid values. By default bi-cubic interpolation is used. Aliasing is avoided by also forward projecting the input grid nodes. If two or more nodes are projected onto the same pixel, their average will dominate in the calculation of the pixel value. Interpolation and aliasing is controlled with the <strong>interp</strong> option.</p>
<p>The <strong>region</strong> option can be used to select a map region larger or smaller than that implied by the extent of the grid.</p>
</section>
<section id="required-arguments" class="level2">
<h2 class="anchored" data-anchor-id="required-arguments">Required Arguments</h2>
<ul>
<li><strong>J</strong> or <strong>proj</strong> or <strong>projection</strong> : – <em>proj=<parameters></parameters></em><br>
Select map projection. More at [proj](../common_opts/opt_J.html)</li>
</ul>
</section>
<section id="optional-arguments" class="level2">
<h2 class="anchored" data-anchor-id="optional-arguments">Optional Arguments</h2>
<ul>
<li><p><strong>A</strong> or <strong>img_out</strong> or <strong>image_out</strong> : – <em>img_out=fname</em><br>
Save an image in a raster format instead of PostScript. Use extension .ppm for a Portable Pixel Map format. For GDAL-aware versions there are more choices: Use <em>fname</em> to select the image file name and extension. If the extension is one of .bmp, .gif, .jpg, .png, or .tif then no driver information is required. For other output formats you must append the required GDAL driver. The <em>driver</em> is the driver code name used by GDAL; see your GDAL installation’s documentation for available drivers. Append a +c<options> string where <em>options</em> is a list of one or more concatenated number of GDAL -co options. For example, to write a GeoPDF with the TerraGo format use <em>“=PDF+cGEO_ENCODING=OGC_BP”</em>. Notes: (1) If a tiff file (.tif) is selected then we will write a GeoTiff image if the GMT projection syntax translates into a PROJ4 syntax, otherwise a plain tiff file is produced. (2) Any vector elements will be lost.</options></p></li>
<li><p><strong>B</strong> or <strong>axes</strong> or <strong>frame</strong><br>
Set map boundary frame and axes attributes. Default is to draw and annotate left, bottom and vertical axes and just draw left and top axes. More at [frame](../common_opts/opt_B.html)</p></li>
<li><p><strong>C</strong> or <strong>color</strong> or <strong>cmap</strong> or <strong>colorap</strong> or <strong>colorscale</strong> : – <em>color=cpt</em><br>
Where <em>cpt</em> is a <em><a href="../..\documentation/general/types.html#sec-cpt-type">GMTcpt</a></em> type or a cpt file name (for <em>grd_z</em> only). Alternatively, supply the name of a GMT color master dynamic CPT [turbo] to automatically determine a continuous CPT from the grid’s z-range; you may round up/down the z-range by adding <strong>+i</strong> <em>zinc</em>. Yet another option is to specify <em>color=“color1,color2 [,color3 ,…]”</em> or <em>color=((r1,g1,b1),(r2,g2,b2),…)</em> to build a linear continuous CPT from those colors automatically. In this case <em>color1</em> etc can be a (r,g,b) triplet, a color name, or an HTML hexadecimal color (e.g.&nbsp;#aabbcc ) (see [Setting color](../common_features/color.html)). When not explicitly set, but a color map is needed, we will either use the current color map, if available (set by a previous call to <em>makecpt</em>), or the default <em>turbo</em> color map.</p></li>
<li><p><strong>clim</strong> : – <em>clim=(z_min,z_max)</em> <strong>|</strong> <em>clim=:zscale</em><br>
When doing an automatic colorization (<em>i.e.</em>, when a colormap is not provided explicitly), limit the automatic color map to be computed between <em>z_min,z_max</em>. Grid values below <em>z_min</em> and above <em>z_max</em> will be painted with the same color as those. Alternatively, use <em>clim=:zscale</em> to use the Interval based on IRAF’s zscale that is an algorithm used in astronomy for finding colorbar limits of for the grid, which showcase data near the median.</p></li>
<li><p><strong>clip</strong> : – <em>clip=“land”</em> <strong>|</strong> <em>clip=:ocean</em> <strong>|</strong> <em>clip=“country_code(s)”</em> <strong>|</strong> <em>clip=(country=“code(s)”, [outside=true])</em> <strong>|</strong> <em>clip=xy</em> <strong>|</strong> <em>clip=(xy, inverse=true)</em><br>
Clip the image according to the selected option. First set of options do the clipping using the <code>coast</code> module. <em>e.,g.</em>: <strong>clip=“land”</strong> (or =:land) clip outside land areas. <strong>clip=“ocean”</strong> does the inverse. <strong>clip=“country_code(s)”</strong> uses one or more country codes (separated by commas) to do the clipping. If want to reverse the sense of the clipping, use the form <strong>clip=(country=“code(s)”, outside=true)</strong>. Use <strong>clip=(continent=code, [outside=true])</strong> to pass the name of continent. Pay attention that this option must be a named tuple. The second set of options make use of the <code>clip</code> module and expect a first argument with a Mx2 matrix with the coordinates of the clipping polygon.</p></li>
<li><p><strong>coast</strong> : – <em>coast=true</em> <strong>|</strong> <em>coast=(…)</em><br>
Call the <a href="../..\documentation/modules/coast.html">coast</a> module to overlay coastlines and/or countries. The short form <em>coast=true</em> just plots the coastlines with a black, 0.5p thickness line. To access all options available in the <em>coast</em> module passe them in the named tuple (…).</p></li>
<li><p><strong>colorbar</strong> : – <em>colorbar=true</em> <strong>|</strong> <em>colorbar=(…)</em><br>
Call the <a href="../..\documentation/modules/colorbar.html">colorbar</a> module to add a colorbar. The short form <em>colorbar=true</em> automatically adds a color bar on the right side of the image using the current color map stored in the global scope. To access all options available in the <em>colorbar</em> module passe them in the named tuple (…).</p></li>
<li><p><strong>equalize</strong> : – <em>equalize=true</em> <strong>|</strong> <em>equalize=ncolors</em><br>
With automatic colorization, map data values to colors through the data’s cumulative distribution function (CDF), so that the colors are histogram equalized. Default (with <code>equalize=true</code>) chooses arbitrary values by a crazy scheme based on equidistant values for a Gaussian CDF. Use <code>equalize=ncolors</code> to specify the desire number of colors.</p></li>
<li><p><strong>percent</strong> : – <em>percent=pct</em><br>
Exclude the two tails of the distribution (in percentage). Grid values are sorted and we exclude data in 0.5<em>pct and 100 - 0.5</em>pct from the automatic colormap determination. This option is specially useful when the grid has outliers.</p></li>
<li><p><strong>D</strong> or <strong>img_in</strong> or <strong>image_in</strong> : – <em>img_in=true</em> <strong>|</strong> <em>img_in=:r</em><br>
GMT will automatically detect standard image files (Geotiff, TIFF, JPG, PNG, GIF, etc.) and will read those via GDAL. For very obscure image formats you may need to explicitly set <strong>img_in</strong>, which specifies that the grid is in fact an image file to be read via GDAL. Use <em>img_in=:r</em> to assign the region specified by <strong>region</strong> to the image. For example, if you have used <strong>region=global</strong> then the image will be assigned a global domain. This mode allows you to project a raw image (an image without referencing coordinates).</p></li>
<li><p><strong>E</strong> or <strong>dpi</strong> : – <em>dpi=xx</em> <strong>|</strong> <em>dpi=:i</em><br>
Sets the resolution of the projected grid that will be created if a map projection other than Linear or Mercator was selected [100]. By default, the projected grid will be of the same size (rows and columns) as the input file. Specify <em>dpi=:i</em> to use the PostScript image operator to interpolate the image at the device resolution.</p></li>
<li><p><strong>G</strong> : – <em>G=“+b”</em> <strong>|</strong> <em>G=“+f”</em><br>
This option only applies when a resulting 1-bit image otherwise would consist of only two colors: black (0) and white (255). If so, this option will instead use the image as a transparent mask and paint the mask with the given <em>color</em>. Use <em>G=“+b”</em> to paint the background pixels (1) or <em>G=“+f”</em> for the foreground pixels [Default].</p></li>
<li><p><strong>I</strong> or <strong>shade</strong> or <strong>shading</strong> or <strong>intensity</strong> : – <em>shade=grid</em> <strong>|</strong> <em>shade=azim</em> <strong>|</strong> <em>shade=(azimuth=az, norm=params, auto=true)</em><br>
Gives the name of a grid with intensities in the (-1,+1) range, or a constant intensity to apply everywhere (affects the ambient light). Alternatively, derive an intensity grid from the input data grid <em>grd_z</em> via a call to <a href="../..\documentation/modules/grdgradient.html">grdgradient</a>; use <code>shade=az</code> or <code>shade=(azimuth=az, norm=params)</code> to specify azimuth and intensity arguments for that module or just give <code>shade=true</code> to select the default arguments <em>(azim=-45,norm=:t1)</em>. If you want a more specific intensity scenario then run grdgradient separately first.</p></li>
<li><p><strong>M</strong> or <strong>monochrome</strong> : – <em>monochrome=true</em><br>
Force conversion to monochrome image using the (television) YIQ transformation. Cannot be used with <strong>nan_alpha</strong>.</p></li>
<li><p><strong>N</strong> or <strong>noclip</strong> : – <em>noclip=true</em><br>
Do not clip the image at the map boundary (only relevant for non-rectangular maps).</p></li>
<li><p><strong>Q</strong> or <strong>nan_alpha</strong> or <strong>alpha_color</strong> : – <em>nan_alpha=true</em> or <em>alpha_color=true|(r,g,b)</em><br>
Make grid nodes with z = NaN transparent. If input is an image <em>alpha_color</em> picks one color (default is black) and makes it transparent (requires GMT6.2 and above).</p></li>
<li><p><strong>R</strong> or <strong>region</strong> or <strong>limits</strong> : – <em>limits=(xmin, xmax, ymin, ymax)</em> <strong>|</strong> <em>limits=(BB=(xmin, xmax, ymin, ymax),)</em> <strong>|</strong> <em>limits=(LLUR=(xmin, xmax, ymin, ymax),units=“unit”)</em> <strong>|</strong> …more<br>
Specify the region of interest. More at [limits](../common_opts/opt_R.html). For perspective view <strong>view</strong>, optionally add <em>zmin,zmax</em>. This option may be used to indicate the range used for the 3-D axes. You may ask for a larger w/e/s/n region to have more room between the image and the axes.</p></li>
<li><p><strong>U</strong> or <strong>time_stamp</strong> : – <em>time_stamp=true</em> <strong>|</strong> <em>time_stamp=(just=“code”, pos=(dx,dy), label=“label”, com=true)</em><br>
Draw GMT time stamp logo on plot. More at [timestamp](../common_opts/opt_U.html)</p></li>
<li><p><strong>V</strong> or <em>verbose</em> : – <em>verbose=true</em> <strong>|</strong> <em>verbose=level</em><br>
Select verbosity level. More at [verbose](../common_opts/opt_V.html)</p></li>
<li><p><strong>X</strong> or <strong>xshift</strong> or <strong>x_offset</strong> : <em>xshift=true</em> <strong>|</strong> <em>xshift=x-shift</em> <strong>|</strong> <em>xshift=(shift=x-shift, mov=“a|c|f|r”)</em><br>
Shift plot origin. More at [xshift](../common_opts/opt_X.html)</p></li>
<li><p><strong>Y</strong> or <strong>yshift</strong> or <strong>y_offset</strong> : <em>yshift=true</em> <strong>|</strong> <em>yshift=y-shift</em> <strong>|</strong> <em>yshift=(shift=y-shift, mov=“a|c|f|r”)</em><br>
Shift plot origin. More at [yshift](../common_opts/opt_Y.html)</p></li>
<li><p><strong>n</strong> or <strong>interp</strong> or <strong>interpol</strong> : – <em>interp=params</em><br>
Select interpolation mode for grids. More at [interp](../common_opts/opt_n.html)</p></li>
<li><p><strong>p</strong> or <strong>view</strong> or <strong>perspective</strong> : – <em>view=(azim, elev)</em><br>
Default is viewpoint from an azimuth of 200 and elevation of 30 degrees.<br>
Specify the viewpoint in terms of azimuth and elevation. The azimuth is the horizontal rotation about the z-axis as measured in degrees from the positive y-axis. That is, from North. This option is not yet fully expanded. Current alternatives are:</p>
<ul>
<li><em>view=??</em><br>
A full GMT compact string with the full set of options.</li>
<li><em>view=(azim,elev)</em><br>
A two elements tuple with azimuth and elevation</li>
<li><em>view=true</em><br>
To propagate the viewpoint used in a previous module (makes sense only in <code>bar3!</code>) More at [perspective](../common_opts/opt_p.html)</li>
</ul></li>
<li><p><strong>t</strong> or <strong>transparency</strong> or <strong>alpha</strong>: – <em>alpha=50</em><br>
Set PDF transparency level for an overlay, in (0-100] percent range. [Default is 0, <em>i.e.</em>, opaque]. Works only for the PDF and PNG formats.</p></li>
<li><p><strong>figname</strong> or <strong>savefig</strong> or <strong>name</strong> : – <em>figname=<code>name.png</code></em><br>
Save the figure with the <code>figname=name.ext</code> where <code>ext</code> chooses the figure image format.</p></li>
</ul>
</section>
<section id="examples" class="level2">
<h2 class="anchored" data-anchor-id="examples">Examples</h2>
<p>To make a map of a shaded global bathymetry (automatically download it if needed) using the Winkel projection, add coast lines, a colorbar and do an histogram equalization with 64 colors, do:</p>
<div id="95cab63d" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grdimage</span>(<span class="st">"@earth_relief_20m_g"</span>, proj<span class="op">=:</span>Winkel, equalize<span class="op">=</span><span class="fl">64</span>, coast<span class="op">=</span><span class="cn">true</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>         colorbar<span class="op">=</span><span class="cn">true</span>, shade<span class="op">=</span><span class="cn">true</span>, show<span class="op">=</span><span class="cn">true</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="grdimage_files/figure-html/cell-2-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>For a quick-and-dirty illuminated color map of the data in the remote file <span class="citation" data-cites="AK_gulf_grav.nc">@AK_gulf_grav.nc</span>, try:</p>
<div id="a64c457c" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grdimage</span>(<span class="st">"@AK_gulf_grav.nc"</span>, shade<span class="op">=</span><span class="cn">true</span>, coast<span class="op">=</span><span class="cn">true</span>, show<span class="op">=</span><span class="cn">true</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="grdimage_files/figure-html/cell-3-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Clip the outside of Africa from Bing mosaic. (You can try also <code>viz(I, clip=:land)</code> and <code>viz(I, clip=(continent=:AF, outside=true))</code>)</p>
<div id="e38809c1" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>I <span class="op">=</span> <span class="fu">mosaic</span>(region<span class="op">=</span>(continent<span class="op">=</span><span class="st">"AF"</span>,));   <span class="co"># Get a mosaic of the ~Africa region</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(I, clip<span class="op">=</span>(continent<span class="op">=:</span>AF,))           <span class="co"># Clip outside of the African continent.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="grdimage_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script>

// JavaScript to handle card hover effects for cards with images

document.addEventListener('DOMContentLoaded', function() {

  // Find all cards

  const cards = document.querySelectorAll('.card');



  cards.forEach(card => {

    const paragraphs = card.querySelectorAll('p');



    // If card has only one paragraph (with image)

    if (paragraphs.length === 1) {

      const p = paragraphs[0];

      const img = p.querySelector('img');



      if (img) {

        // Get all text nodes

        const textContent = Array.from(p.childNodes)

          .filter(node => node.nodeType === Node.TEXT_NODE)

          .map(node => node.textContent.trim())

          .filter(text => text.length > 0)

          .join(' ');



        if (textContent) {

          // Create overlay div for description

          const overlay = document.createElement('div');

          overlay.className = 'card-description-overlay';

          overlay.textContent = textContent;

          card.appendChild(overlay);



          // Remove text nodes completely

          Array.from(p.childNodes).forEach(node => {

            if (node.nodeType === Node.TEXT_NODE && node.textContent.trim().length > 0) {

              node.remove();

            }

          });

        }

      }

    }

  });



  // Equalize heights of grid sections (documentation cards)

  function equalizeGridHeights() {

    const grids = document.querySelectorAll('.grid');



    grids.forEach(grid => {

      const sections = Array.from(grid.querySelectorAll(':scope > section, :scope > div'));



      if (sections.length === 0) return;



      // Reset heights

      sections.forEach(section => {

        section.style.height = 'auto';

      });



      // Group sections by row (based on offsetTop)

      const rows = new Map();

      sections.forEach(section => {

        const top = section.offsetTop;

        if (!rows.has(top)) {

          rows.set(top, []);

        }

        rows.get(top).push(section);

      });



      // Equalize heights within each row

      rows.forEach(rowSections => {

        const maxHeight = Math.max(...rowSections.map(s => s.offsetHeight));

        rowSections.forEach(section => {

          section.style.height = maxHeight + 'px';

        });

      });

    });

  }



  // Run on load and resize

  equalizeGridHeights();

  window.addEventListener('resize', equalizeGridHeights);

});

</script>

<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/GenericMappingTools\.github\.io\/GMTjl_doc\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>