<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>cubeplot</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0615b85506723fa54ab13a613a4e9e4c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../custom.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/GMTjl_logo.png" alt="" class="navbar-logo light-content">
    <img src="../../assets/GMTjl_logo.png" alt="" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-documentation" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Documentation</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-documentation">    
        <li>
    <a class="dropdown-item" href="../../documentation.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../documentation/modules.html">
 <span class="dropdown-text">GMT Modules</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/general/types.html">
 <span class="dropdown-text">GMT.jl Types</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/extensions.html">
 <span class="dropdown-text">GMT.jl Extensions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/gdalfuns.html">
 <span class="dropdown-text">GDAL Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/solids.html">
 <span class="dropdown-text">Solids Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/imgproc.html">
 <span class="dropdown-text">Image Processing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/common_features.html">
 <span class="dropdown-text">Common Features</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../documentation/alphabetical.html">
 <span class="dropdown-text">Alphabetical List</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../examples.html"> 
<span class="menu-text">Examples</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-gallery-(gmt-gallery" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Gallery (GMT Gallery)</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-gallery-(gmt-gallery">    
        <li>
    <a class="dropdown-item" href="../../gallery.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../gallery/ex01.html">
 <span class="dropdown-text">(1) Contour maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex02.html">
 <span class="dropdown-text">(2) Image presentations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex03.html">
 <span class="dropdown-text">(3) Spectral estimation and xy-plots</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex04.html">
 <span class="dropdown-text">(4)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex05.html">
 <span class="dropdown-text">(5) A 3-D illuminated surface</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex06.html">
 <span class="dropdown-text">(6) Plotting of histograms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex07.html">
 <span class="dropdown-text">(7) A simple location map</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex08.html">
 <span class="dropdown-text">(8) A 3-D histogram</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex09.html">
 <span class="dropdown-text">(9) Time-series along tracks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex10.html">
 <span class="dropdown-text">(10) A geographical bar graph plot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex11.html">
 <span class="dropdown-text">(11)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex12.html">
 <span class="dropdown-text">(12) Optimal triangulation of data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex13.html">
 <span class="dropdown-text">(13) Plotting of vector fields</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex14.html">
 <span class="dropdown-text">(14) Gridding of data and trend surfaces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex15.html">
 <span class="dropdown-text">(15) Gridding, contouring, and masking of unconstrained areas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex16.html">
 <span class="dropdown-text">(16) Gridding of data, continued</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex17.html">
 <span class="dropdown-text">(17) Images clipped by coastlines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex18.html">
 <span class="dropdown-text">(18) Volumes and Spatial Selections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex19.html">
 <span class="dropdown-text">(19) Color patterns on maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex20.html">
 <span class="dropdown-text">(20) Custom plot symbols</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex21.html">
 <span class="dropdown-text">(21)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex22.html">
 <span class="dropdown-text">(22)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex23.html">
 <span class="dropdown-text">(23)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex24.html">
 <span class="dropdown-text">(24)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex25.html">
 <span class="dropdown-text">(25)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex26.html">
 <span class="dropdown-text">(26)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex27.html">
 <span class="dropdown-text">(27)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex28.html">
 <span class="dropdown-text">(28)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex29.html">
 <span class="dropdown-text">(29)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gallery/ex30.html">
 <span class="dropdown-text">(30)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="../../tutorials.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../tutorials/ISC/isc.jl.html">
 <span class="dropdown-text">ISC seismicity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/Landsat8/histogram_stretch.html">
 <span class="dropdown-text">Landsat 8/9</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/coast/coastlines.html">
 <span class="dropdown-text">Coastlines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/choropleths/choropleths.html">
 <span class="dropdown-text">US Choropleths</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/dlakelan/GMTMaps.html">
 <span class="dropdown-text"><span class="citation" data-cites="dlakelan">@dlakelan</span> choropleths</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/longest_sail/longestsail.html">
 <span class="dropdown-text">Longest Sail</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/vector_shp/vector_shp.html">
 <span class="dropdown-text">Geospatial vector</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/texture_shading/texture.html">
 <span class="dropdown-text">Texture Shading</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/mosaics/mosaics.html">
 <span class="dropdown-text">Mosaics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/insets/insets.html">
 <span class="dropdown-text">Insets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/remote_datasets/remote_datasets.html">
 <span class="dropdown-text">Remote Grids</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/blender_shading/blender_rt.html">
 <span class="dropdown-text">Blender</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tutorials/signal/signal.html">
 <span class="dropdown-text">Signal</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-geophysics" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Geophysics</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-geophysics">    
        <li>
    <a class="dropdown-item" href="../../geophysics.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../geophysics/seismicity/global_seis.html">
 <span class="dropdown-text">Seismicity</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../geophysics/earthtides/01_earthtides.html">
 <span class="dropdown-text">Earth Tides</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../geophysics/weather/01_weather.html">
 <span class="dropdown-text">Weather Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-help" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Help</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-help">    
        <li>
    <a class="dropdown-item" href="https://github.com/GenericMappingTools/GMT.jl/issues"><i class="bi bi-bug" role="img">
</i> 
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://forum.generic-mapping-tools.org/c/questions/5"><i class="bi bi-chat-right-text" role="img">
</i> 
 <span class="dropdown-text">Ask a Question</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#see-also" id="toc-see-also" class="nav-link active" data-scroll-target="#see-also">See Also</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">cubeplot</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cubeplot</span>(img1<span class="op">::</span><span class="dt">Union{GMTimage, String}</span>, img2<span class="op">::</span><span class="dt">Union{GMTimage, String}</span>=<span class="st">""</span>, img3<span class="op">::</span><span class="dt">Union{GMTimage, String}</span>=<span class="st">""</span>;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>         back<span class="op">::</span><span class="dt">Bool</span>=<span class="cn">false</span>, show<span class="op">=</span><span class="cn">false</span>, notop<span class="op">::</span><span class="dt">Bool</span>=<span class="cn">false</span>, kw<span class="op">...</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Plot images on the sides of a cube. Those images can be provided as file names, or <a href="../..\documentation/general/types.html#sec-image-type">GMTimage</a> objects.</p>
<ul>
<li><p><code>img1,2,3</code>: File names or GMTimages of the images to be plotted on the three cube sides. Of those three, only <code>img1</code> is mandatory, case in which it will be repeated in the thre visible sides of the cube. If <code>img1</code> and <code>img2</code>, this second image is plotted on the two vertical sides. When the three images are provided, the first goes to top (or bottom if <code>back=true</code>) the second to the <em>xz</em> and third to <em>yz</em> planes.</p></li>
<li><p><code>back</code>: Boolean that defaults to false, meaning that images are printed on the front sides of the cube. If <code>false</code>, the images are printed in the back sides. Use this option when wanting to plot on the walls of a 3D lines/scatter or grid views. The default is to print on the front facades.</p></li>
<li><p><code>notop</code>: If true, do not plot the top side (implies <code>back=false</code>)</p></li>
<li><p><code>show</code>: If <code>true</code>, finish and display the figure.</p></li>
</ul>
<p>The <code>kw...</code> keyword/value options may be used to pass:</p>
<ul>
<li><p><code>region</code>: The limits extents that will be used to annotate the <em>x,y,z</em> axes. It uses the same syntax as all other modules that accept this option (<em>e.g.</em> <a href="../..\documentation/modules/coast.html">coast</a>). It defaults to “0/9/0/9/0/9”</p></li>
<li><p><code>figsize</code>: Select the horizontal size(s). Defaults to 15x15 cm.</p></li>
<li><p><code>zsize</code>: Sets the size of <em>z</em> axis in cm. The default is 15.</p></li>
<li><p><code>view</code>: The view point. Default is <code>(135,30)</code>. WARNING: only azimute views from the 4rth quadrant are implemented.</p></li>
<li><p><code>transparency</code>: Sets the image’s transparency level in the [0,1] or [0 100] intervals. Default is opaque.</p></li>
<li><p><code>inset</code> or <code>hole</code>: Draws an inset hole in the cube’s Southern wall. This option is a tuple with the form: <code>((img1,img2[,img3]), width=?, [depth=?])</code> where <code>(img1,img2[,img3])</code> are the images of the <code>north</code> (that is, the plane whose normal is <code>y</code>) and <code>west</code> (that is, the plane whose normal is <code>x</code>) and, optionally, <code>bottom</code> sides of the inset. The <code>width</code> and <code>depth</code> are the width and depth of the inset. If <code>depth</code> is not provided it defaults to <code>width</code>. These values <strong>must</strong> be given in percentage of the cube’s width and can be given in the [0-1] or [0-100] interval.</p></li>
<li><p><code>xlabel, ylabel, zlabel, title</code>: Optional axes labels and title. Each one of these must be a string.</p></li>
<li><p><code>cmap, colormap, cpt, colorscale</code>: Add a colorbar at the bottom of the figure. The colormap can be passed as a single argument or as a tuple of arguments, where first must be the colormap and second [and optional a third] are the axes colorbar labels taking the form: <code>cmap=(C, "xlabel=Blabla1"[, "ylabel=Blabla2"])</code>.</p></li>
</ul>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td><code>julia cubeplot(G::GMTgrid; top=nothing, topshade=false, zdown::Bool=false, xlabel="", ylabel="", zlabel="", title="", show=false, interp::Float64=0.0, kw...)</code></td>
</tr>
<tr class="even">
<td>Make a 3D plot of a 3D <a href="../..\documentation/general/types.html#sec-grid-type">GMTgrid</a> (a cube) with a top view perspective from the 4rth quadrant (only one implemented). There are several options to control the painting of the cube walls but off course not all possibilities are covered. For ultimate control, users can create the side wall images separately and feed them to the cubeplot method that accepts only images as input.</td>
</tr>
<tr class="odd">
<td>- <code>cmap, colormap, cpt, colorscale</code>: Pass in a <a href="../..\documentation/general/types.html#sec-cpt-type">GMTcpt</a> colormap to be used to paint the vertical walls and optionally, the top wall. The default is to compute this from the cube’s min/max values with the <code>turbo</code> colormap.</td>
</tr>
<tr class="even">
<td>- <code>colorbar</code>: Add a colorbar at the bottom of the figure. The plotted colormap is either the auto-generated colormap (from the cube’s min/max and the <code>turbo</code> colormap) or the one passed via the <code>cmap</code> option. The optional syntax of this option is either: <code>colorbar=true</code> or <code>colorbar=(C, "xlabel=Blabla1"[, "ylabel=Blabla2"])</code>. Attention that when the labels request are passed, thy MUST conform with the <code>xlabel=...</code> and <code>ylabel=...</code> prefix part.</td>
</tr>
<tr class="odd">
<td>- <code>inset</code>: Add an inset to the figure. This inset takes the form of a <em>hole</em> located in the lower right corner of the cube in which its inner walls are painted with partial vertical slices of the cube. The <code>inset</code> option may be passed as a two elements array or tuple where first element is the starting longitude (end is cube’s easternmost coordinate) and second the ending latitude (start is southernmost lat): an alternative syntax is to use <code>inset=(lon=?, lat=?)</code>.</td>
</tr>
<tr class="even">
<td>- <code>interp</code>: When the cube layers are not equi-distant, the vertical side walls are not regular gris. This option, that is called by default, takes care of obtaining a regular grid by linear interpolation along the columns. This automatic interpolation uses the smallest increment in the vertical direction, but that may be overridden by the <code>interp</code> increment option (a float value).</td>
</tr>
<tr class="odd">
<td>- <code>region, limits</code>: A 4 elements array or Tuple (<code>x_min, x_max, y_min, y_max</code>) with the limits of a sub-region to display. Default uses the entire cube.</td>
</tr>
<tr class="even">
<td>- <code>show</code>: If <code>true</code> display the figure. Default is <code>false</code>, <em>i.e.</em> it lets append further elements latter if wished.</td>
</tr>
<tr class="odd">
<td>- <code>top</code>: An optional <a href="../..\documentation/general/types.html#sec-grid-type">GMTgrid</a> or the file name of a <a href="../..\documentation/general/types.html#sec-grid-type">GMTgrid</a> to be used to create the top wall of the cube. If, instead, a <a href="../..\documentation/general/types.html#sec-image-type">GMTimage</a> is passed we plot it directly (grids are converted to images using default colormaps or one passed via <code>topcmap</code>). The default is to use the cube’s first slice as the top wall.</td>
</tr>
<tr class="even">
<td>- <code>topshade</code>: Only used when the <code>top</code> option was used to pass a <a href="../..\documentation/general/types.html#sec-grid-type">GMTgrid</a> (or the name of one). When <code>true</code>, the top wall image is created with the cube’s first slice and a shaded effect computed with <code>grdgradient</code> on the <code>top</code> grid (normally a topography grid). This creates a nice effect that shows both the cube’s first layer and the topography where it lies. Optionally, the <code>topshade</code> option may be used with a <code>grdgradient</code> grid computed with any other grid.</td>
</tr>
<tr class="odd">
<td>- <code>topcmap</code>: An alternative colormap for the top wall. Default is the same as the <code>turbo</code> computed with cube <code>G</code> itself.</td>
</tr>
<tr class="even">
<td>- <code>xlabel, ylabel, zlabel, title</code>: Optional axes labels and title. Each one of these must be a string.</td>
</tr>
<tr class="odd">
<td>- <code>zdown</code>: When <code>true</code>, the z-axis is positive down. Default is <code>false</code> (positive up).</td>
</tr>
<tr class="even">
<td>- <code>zsize</code>: Vertical size of the plotted cube. Default is 6 cm. Use a negative value if the z-axis is positive down, but see also the alternative <code>zdown</code> option.</td>
</tr>
<tr class="odd">
<td>Examples</td>
</tr>
</tbody>
</table>
<div id="8cdff6eb" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cubeplot</span>(GMT.TESTSDIR <span class="op">*</span> <span class="st">"assets/seila_gray.jpg"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>         GMT.TESTSDIR <span class="op">*</span> <span class="st">"assets/seis_section_rgb.jpg"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>         GMT.TESTSDIR <span class="op">*</span> <span class="st">"assets/seis_section_gray.jpg"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>         zsize<span class="op">=</span><span class="fl">6</span>, show<span class="op">=</span><span class="cn">true</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="cubeplot_files/figure-html/cell-2-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="d-velocity-models-with-side-walls" class="level3">
<h3 class="anchored" data-anchor-id="d-velocity-models-with-side-walls">3D velocity models with side walls</h3>
<p>These examples show a GMT.jl version of a PyGMT post in the GMT forum and that can be found at the original author’s, JiahongLuo, Github <a href="https://github.com/Luojiahong/PyGMT_3D_mapview/blob/main/mapview_3d_earthquake.ipynb">site</a></p>
<p>The <a href="../..\documentation/utilities/cubeplot.html">cubeplot</a> function let us easily plot images on the sides of a cube. That function can also be used to create those side figures directly from a 3D cube grid.</p>
<div id="840fea5d" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Download data from:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> <span class="fu">gmtread</span>(<span class="st">"https://github.com/ShouchengHan/USTClitho2.0/blob/main/USTClitho2.0.wrst.sea_level.txt"</span>);</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create two data cubes (grids) with the Vp and Vs velocities</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>Cvp <span class="op">=</span> <span class="fu">xyzw2cube</span>(model);</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>Cvs <span class="op">=</span> <span class="fu">xyzw2cube</span>(model, zcol<span class="op">=</span><span class="fl">5</span>);</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Add names to the cube layers to be used as titles in next figure</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>Cvp.names <span class="op">=</span> [<span class="st">"Depth = </span><span class="sc">$</span>(<span class="fu">Int</span>(i))<span class="st"> km"</span> for i <span class="kw">in</span> Cvp.v];</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>Cvs.names <span class="op">=</span> [<span class="st">"Depth = </span><span class="sc">$</span>(<span class="fu">Int</span>(i))<span class="st"> km"</span> for i <span class="kw">in</span> Cvs.v];</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<div class="ansi-escaped-output">
<pre>gmtread [WARNING]: Long input record (4646 bytes) was truncated to first 4094 bytes!

gmtread [WARNING]: Long input record (4507 bytes) was truncated to first 4094 bytes!

<span class="ansi-yellow-fg ansi-bold">┌ </span><span class="ansi-yellow-fg ansi-bold">Warning: </span> file "https://github.com/ShouchengHan/USTClitho2.0/blob/main/USTClitho2.0.wrst.sea_level.txt" is empty or has no data after the header.

<span class="ansi-yellow-fg ansi-bold">└ </span><span class="ansi-bright-black-fg">@ GMT C:\Users\j\.julia\dev\GMT\src\gmtreadwrite.jl:242</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>The dataset must contain at least 4 columns (x,y,z,w)

Stacktrace:
 [1] <span class="ansi-bold">error</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">s</span>::String<span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-bright-black-fg">Base</span> <span class="ansi-bright-black-fg">.\</span><span style="text-decoration:underline" class="ansi-bright-black-fg">error.jl:35</span>
 [2] <span class="ansi-bold">xyzw2cube</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">D</span>::GMTdataset<span class="ansi-bright-black-fg">{Float64, 2}</span>; <span class="ansi-bright-black-fg">zcol</span>::Int64, <span class="ansi-bright-black-fg">datatype</span>::DataType, <span class="ansi-bright-black-fg">tit</span>::String, <span class="ansi-bright-black-fg">names</span>::Vector<span class="ansi-bright-black-fg">{String}</span>, <span class="ansi-bright-black-fg">varnames</span>::Vector<span class="ansi-bright-black-fg">{String}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">GMT</span> <span class="ansi-bright-black-fg">C:\Users\j\.julia\dev\GMT\src\</span><span style="text-decoration:underline" class="ansi-bright-black-fg">utils_types.jl:1818</span>
 [3] <span class="ansi-bold">xyzw2cube</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">D</span>::GMTdataset<span class="ansi-bright-black-fg">{Float64, 2}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">   @</span> <span class="ansi-magenta-fg">GMT</span> <span class="ansi-bright-black-fg">C:\Users\j\.julia\dev\GMT\src\</span><span style="text-decoration:underline" class="ansi-bright-black-fg">utils_types.jl:1815</span>
 [4] top-level scope
<span class="ansi-bright-black-fg">   @</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[3]:4</span></pre>
</div>
</div>
</div>
<p>Show all 12 layers of the P-waves velocity in a figure. We use a diffent colormap for each layer to avoid that layers become too monochromatic.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(Cvp, colorbar<span class="op">=</span><span class="cn">true</span>, cmap<span class="op">=:</span>same, title<span class="op">=</span><span class="st">"Vp model"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><img src="../..\assets/Vp_mosaic.png" class="center img-fluid" width="280"></p>
<p>Show the P and S velocities with a slight variation of the top layer. For the P-velocity we plot the topography on top and for the S-velocity we show the superficial S velocity but apply a shading effect calculated from the topography grid.</p>
<div id="40bdcb80" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span>   <span class="co"># Hide</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cubeplot</span>(Cvp, top<span class="op">=</span><span class="st">"@earth_relief_05m"</span>, colorbar<span class="op">=</span>(<span class="st">"xlabel=P-wave velocity"</span>, <span class="st">"ylabel=km/s"</span>), zdown<span class="op">=</span><span class="cn">true</span>, title<span class="op">=</span><span class="st">"Vp model"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cubeplot!</span>(Cvs, top<span class="op">=</span><span class="st">"@earth_relief_05m"</span>, topshade<span class="op">=</span><span class="cn">true</span>, zdown<span class="op">=</span><span class="cn">true</span>, colorbar<span class="op">=</span>(<span class="st">"xlabel=S-wave velocity"</span>, <span class="st">"ylabel=km/s"</span>), xshift<span class="op">=</span><span class="fl">18</span>, title<span class="op">=</span><span class="st">"Vs model"</span>, show<span class="op">=</span><span class="cn">true</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>UndefVarError: `Cvp` not defined

Stacktrace:
 [1] top-level scope
<span class="ansi-bright-black-fg">   @</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[4]:2</span></pre>
</div>
</div>
</div>
<p><img src="../..\assets/Vp_Vs_cubes.png" class="center img-fluid" width="1000"></p>
<p>To finish we show how to make an inset view in the 3D model.</p>
<div id="acb08ce8" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GMT</span>   <span class="co"># Hide</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cubeplot</span>(Cvp, top<span class="op">=</span><span class="st">"@earth_relief"</span>, inset<span class="op">=</span>(lon<span class="op">=</span><span class="fl">100</span>, lat<span class="op">=</span><span class="fl">35</span>), topshade<span class="op">=</span><span class="cn">true</span>, zdown<span class="op">=</span><span class="cn">true</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>         colorbar<span class="op">=</span>(<span class="st">"xlabel=P-wave velocity"</span>, <span class="st">"ylabel=km/s"</span>), show<span class="op">=</span><span class="cn">true</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>UndefVarError: `Cvp` not defined

Stacktrace:
 [1] top-level scope
<span class="ansi-bright-black-fg">   @</span> <span style="text-decoration:underline" class="ansi-bright-black-fg">In[5]:2</span></pre>
</div>
</div>
</div>
<p><img src="../..\assets/Vp_inset.png" class="center img-fluid" width="800"></p>
</section>
<section id="see-also" class="level2">
<h2 class="anchored" data-anchor-id="see-also">See Also</h2>
<p><a href="../..\documentation/utilities/slicecube.html">slicecube</a>, <a href="../..\documentation/utilities/xyzw2cube.html">xyzw2cube</a></p>


</section>

</main> <!-- /main -->
<script>

// JavaScript to handle card hover effects for cards with images

document.addEventListener('DOMContentLoaded', function() {

  // Find all cards

  const cards = document.querySelectorAll('.card');



  cards.forEach(card => {

    const paragraphs = card.querySelectorAll('p');



    // If card has only one paragraph (with image)

    if (paragraphs.length === 1) {

      const p = paragraphs[0];

      const img = p.querySelector('img');



      if (img) {

        // Get all text nodes

        const textContent = Array.from(p.childNodes)

          .filter(node => node.nodeType === Node.TEXT_NODE)

          .map(node => node.textContent.trim())

          .filter(text => text.length > 0)

          .join(' ');



        if (textContent) {

          // Create overlay div for description

          const overlay = document.createElement('div');

          overlay.className = 'card-description-overlay';

          overlay.textContent = textContent;

          card.appendChild(overlay);



          // Remove text nodes completely

          Array.from(p.childNodes).forEach(node => {

            if (node.nodeType === Node.TEXT_NODE && node.textContent.trim().length > 0) {

              node.remove();

            }

          });

        }

      }

    }

  });



  // Equalize heights of grid sections (documentation cards)

  function equalizeGridHeights() {

    const grids = document.querySelectorAll('.grid');



    grids.forEach(grid => {

      const sections = Array.from(grid.querySelectorAll(':scope > section, :scope > div'));



      if (sections.length === 0) return;



      // Reset heights

      sections.forEach(section => {

        section.style.height = 'auto';

      });



      // Group sections by row (based on offsetTop)

      const rows = new Map();

      sections.forEach(section => {

        const top = section.offsetTop;

        if (!rows.has(top)) {

          rows.set(top, []);

        }

        rows.get(top).push(section);

      });



      // Equalize heights within each row

      rows.forEach(rowSections => {

        const maxHeight = Math.max(...rowSections.map(s => s.offsetHeight));

        rowSections.forEach(section => {

          section.style.height = maxHeight + 'px';

        });

      });

    });

  }



  // Run on load and resize

  equalizeGridHeights();

  window.addEventListener('resize', equalizeGridHeights);

});

</script>

<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/GenericMappingTools\.github\.io\/GMTjl_doc\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>